define(["jquery","underscore","plugin-dependencies","common/utils/templates","text!./template.html","text!./item.html","css!./template.css"],function(e,t,i,n,a,r){a=n.createTemplate(a),r=n.createTemplate(r);var l=function(t){i.log()("ets",{code:"CC_RECENTS_USAGE",sub_code:"MOBILE_CLICK"}),i.router.navigate("/assets/mobile?location="+e(t.currentTarget).data("creation-url"),{trigger:!0,replace:!1})};return function(n){var o=e(a({translate:i.translate})),c=function(){for(var t=200,i=20,n=e(".stellar-MobileCreations-list").width(),a=0;n>a;)a+=200+1.2*i;var r=Math.min(n/a,1),l=Math.floor(t*r);o.css("height",l),o.find(".stellar-MobileCreations-asset").css({width:l,height:l})};return o.find("ul").empty(),t.each(n,function(e){o.find("ul").append(r({id:e.syncgroup+"/"+e.id,url:e.url().href,title:i.utils.htmlEncode(e.getName())})).hide().fadeIn(500);var t=o.find('li[data-creation="'+e.syncgroup+"/"+e.id+'"]');t.off("click",l).on("click",l),e.getRendition("image/png",300).then(function(i){t.find(".stellar-MobileCreations-image").css({"background-image":"url("+i.attr("src")+")","background-size":"layup"===e.type?"contain":"cover"}).hide().fadeIn(500)})}),e(window).on("resize",c),t.delay(c,0),o}});