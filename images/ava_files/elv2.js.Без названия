define(["jquery","underscore","plugin-dependencies","common/utils/templates","text!./template.html","text!./item.html","css!./template.css"],function(e,t,n,a,i,r){i=a.createTemplate(i),r=a.createTemplate(r);var l=function(t){n.log()("ets",{code:"CC_RECENTS_USAGE",sub_code:"MOBILE_CLICK"}),n.router.navigate("/assets/mobile?location="+e(t.currentTarget).data("creation-url").replace("/manifest",""),{trigger:!0,replace:!1})};return function(a){var o=e(i({translate:n.translate})),c=function(e){return function(t){e.find(".stellar-MobileCreations-title").html(t.escape("name")),t.getRendition(300).then(function(n){e.find(".stellar-MobileCreations-image").css({"background-image":"url("+n.attr("src")+")","background-size":"layup"===t.get("filter")?"contain":"cover"}).hide().fadeIn(500)})}},s=function(t){var n=e(r({id:t.id,url:t.url()}));o.find("ul").append(n).hide().fadeIn(500),n.off("click",l).on("click",l);var a=c(n);t.get("name")&&a(t),t.on("change",a)},u=function(){for(var t=200,n=20,a=e(".stellar-MobileCreations-list").width(),i=0;a>i;)i+=200+1.2*n;var r=Math.min(a/i,1),l=Math.floor(t*r);o.css("height",l),o.find(".stellar-MobileCreations-asset").css({width:l,height:l})};return t.each(a.slice(0,11),function(e){s(e),e.load()}),e(window).on("resize",u),t.delay(u,0),o}});